import{x as je,v as Ze,l as Je,m as Oe,i as f,c as H,j as we,q as Me,a as P,e as c,f as l,h as a,r as u,o as d,k as r,b as p,F as B,d as j,w as le,t as k,g as ae,A as Te,B as We}from"./index-Ckjzomrf.js";import{_ as Re}from"./_plugin-vue_export-helper-DlAUqK2U.js";const qe={class:"verwaltung-view"},Qe={class:"d-flex justify-end mb-4"},Xe={class:"d-flex justify-end mb-4"},Ye={class:"d-flex align-center justify-space-between mb-4 flex-wrap gap-2"},el={class:"d-flex flex-wrap align-center ga-2 mb-1"},ll={class:"text-body-1"},tl={class:"text-caption text-medium-emphasis"},al={class:"d-flex align-center justify-space-between mb-4 flex-wrap gap-2"},nl={class:"d-flex gap-2"},ol={class:"d-flex flex-wrap gap-2"},rl={class:"d-flex align-center justify-space-between mb-3"},ul={class:"text-subtitle-2"},il={__name:"VerwaltungView",setup(sl){const U=je(),b=Ze(),$=Je(),i=Oe(),I=f(""),z=f("vendors"),Z=f(!1),J=f(null),x=f({name:"",color:"#10B981"}),O=f(!1),M=f(null),C=f({name:"",vendorId:null}),T=f(!1),W=f(null),y=f({name:"",categoryId:null,defaultUnit:"",freshnessDays:7}),R=f(!1),q=f(null),v=f({name:"",recipeUrl:"",defaultServings:2,ingredients:[]}),Q=f(!1),D=f(null),m=f({productId:null,productName:"",amount:1,unit:"",optional:!1}),X=f(!1),Y=f(""),S=f(""),se=["g","kg","ml","l","Stück","EL","TL","Bund","Packung","Dose"],Ve=["#10B981","#0EA5E9","#8B5CF6","#F97316","#EF4444","#EC4899","#14B8A6","#6366F1"],ne=H(()=>[...b.vendors].sort((n,e)=>n.name.localeCompare(e.name))),_e=H(()=>{let n=U.products;if(I.value&&z.value==="products"){const e=I.value.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(e))}return[...n].sort((e,o)=>e.name.localeCompare(o.name))}),de=H(()=>{let n=$.dishes;if(I.value&&z.value==="dishes"){const e=I.value.toLowerCase();n=n.filter(o=>o.name.toLowerCase().includes(e))}return[...n].sort((e,o)=>e.name.localeCompare(o.name))}),oe=H(()=>b.categories.map(n=>{const e=b.vendors.find(o=>o.id===n.vendorId);return{...n,vendorName:e?.name||"Unbekannt",vendorColor:e?.color||"#9CA3AF",displayName:`${n.name} (${e?.name||"Unbekannt"})`}}).sort((n,e)=>n.name.localeCompare(e.name))),me=H(()=>_e.value.map(n=>{const e=b.categories.find(g=>g.id===n.categoryId),o=e?b.vendors.find(g=>g.id===e.vendorId):null;return{...n,categoryName:e?.name||null,vendorName:o?.name||null,vendorColor:o?.color||"#9CA3AF"}})),xe=H(()=>U.products.map(n=>{const e=b.categories.find(g=>g.id===n.categoryId),o=e?b.vendors.find(g=>g.id===e.vendorId):null;return{value:n.id,title:n.name,subtitle:o&&e?`${o.name}: ${e.name}`:"Keine Kategorie",product:n}}));we(()=>m.value.productId,n=>{if(!n)return;const e=U.products.find(o=>o.id===n);e&&(m.value.productName=e.name,e.defaultUnit&&!m.value.unit&&(m.value.unit=e.defaultUnit))}),we(()=>m.value.productName,n=>{if(!n||m.value.productId)return;const e=n.toLowerCase().trim(),o=U.products.find(g=>g.name.toLowerCase()===e);o&&(m.value.productId=o.id)});function ve(n=null){n?(J.value=n,x.value={...n}):(J.value=null,x.value={name:"",color:"#10B981"}),Z.value=!0}async function Ce(){if(!x.value.name.trim()){i.showSnackbar("Name ist erforderlich","error");return}try{J.value?(await b.updateVendor(J.value.id,x.value),i.showSnackbar("Händler aktualisiert")):(await b.createVendor(x.value),i.showSnackbar("Händler erstellt")),Z.value=!1}catch{i.showSnackbar("Fehler beim Speichern","error")}}async function Se(n){if(confirm(`"${n.name}" wirklich löschen?`))try{await b.deleteVendor(n.id),i.showSnackbar("Händler gelöscht")}catch{i.showSnackbar("Fehler beim Löschen","error")}}function fe(n=null){n?(M.value=n,C.value={...n}):(M.value=null,C.value={name:"",vendorId:null}),O.value=!0}async function he(){if(!C.value.name.trim()||!C.value.vendorId){i.showSnackbar("Name und Händler sind erforderlich","error");return}try{M.value?(await b.updateCategory(M.value.id,C.value),i.showSnackbar("Kategorie aktualisiert")):(await b.createCategory(C.value),i.showSnackbar("Kategorie erstellt")),O.value=!1}catch{i.showSnackbar("Fehler beim Speichern","error")}}async function Ne(n){if(confirm(`"${n.name}" wirklich löschen?`))try{await b.deleteCategory(n.id),i.showSnackbar("Kategorie gelöscht")}catch{i.showSnackbar("Fehler beim Löschen","error")}}function ce(n=null){n?(W.value=n,y.value={...n}):(W.value=null,y.value={name:"",categoryId:null,defaultUnit:"",freshnessDays:7}),T.value=!0}async function Ue(){if(!y.value.name.trim()){i.showSnackbar("Name ist erforderlich","error");return}try{W.value?(await U.updateProduct(W.value.id,y.value),i.showSnackbar("Produkt aktualisiert")):(await U.createProduct(y.value),i.showSnackbar("Produkt erstellt")),T.value=!1}catch{i.showSnackbar("Fehler beim Speichern","error")}}async function $e(n){if(confirm(`"${n.name}" wirklich löschen?`))try{await U.deleteProduct(n.id),i.showSnackbar("Produkt gelöscht")}catch{i.showSnackbar("Fehler beim Löschen","error")}}function pe(n=null){n?(q.value=n,v.value={name:n.name,recipeUrl:n.recipeUrl||"",defaultServings:n.defaultServings,ingredients:[...n.ingredients||[]]}):(q.value=null,v.value={name:"",recipeUrl:"",defaultServings:2,ingredients:[]}),R.value=!0}async function Ie(){if(!v.value.name.trim()){i.showSnackbar("Name ist erforderlich","error");return}try{const n={name:v.value.name.trim(),recipeUrl:v.value.recipeUrl||null,defaultServings:v.value.defaultServings,ingredients:v.value.ingredients,type:"dish"};q.value?(await $.updateDish(q.value.id,n),i.showSnackbar("Gericht aktualisiert")):(await $.createDish(n),i.showSnackbar("Gericht erstellt")),R.value=!1,await $.fetchDishes()}catch{i.showSnackbar("Fehler beim Speichern","error")}}async function De(n){if(confirm(`"${n.name}" wirklich löschen?`))try{await $.deleteDish(n.id),i.showSnackbar("Gericht gelöscht")}catch{i.showSnackbar("Fehler beim Löschen","error")}}function be(n=null){n?(D.value=n,m.value={...n}):(D.value=null,m.value={productId:null,productName:"",amount:1,unit:"",optional:!1}),Q.value=!0}function Fe(){if(!m.value.productName.trim()){i.showSnackbar("Name ist erforderlich","error");return}const n={id:D.value?.id||crypto.randomUUID(),productId:m.value.productId||null,productName:m.value.productName.trim(),amount:parseFloat(m.value.amount)||0,unit:m.value.unit,optional:m.value.optional};if(D.value){const e=v.value.ingredients.findIndex(o=>o.id===D.value.id);e!==-1&&(v.value.ingredients[e]=n)}else v.value.ingredients.push(n);Q.value=!1}function Pe(n){v.value.ingredients=v.value.ingredients.filter(e=>e.id!==n.id)}function ze(){Y.value="",S.value="",X.value=!0}async function Ae(){S.value="";try{const n=JSON.parse(Y.value);if(!n.name||typeof n.name!="string"){S.value='Fehler: "name" ist erforderlich und muss ein String sein';return}if(!Array.isArray(n.ingredients)){S.value='Fehler: "ingredients" muss ein Array sein';return}for(let o=0;o<n.ingredients.length;o++){const g=n.ingredients[o];if(!g.productName||typeof g.productName!="string"){S.value=`Fehler in Zutat ${o+1}: "productName" ist erforderlich`;return}if(typeof g.amount!="number"){S.value=`Fehler in Zutat ${o+1}: "amount" muss eine Zahl sein`;return}}const e={name:n.name,recipeUrl:n.recipeUrl||null,defaultServings:n.defaultServings||2,ingredients:n.ingredients.map(o=>({id:crypto.randomUUID(),productId:null,productName:o.productName,amount:o.amount,unit:o.unit||"",optional:o.optional||!1})),type:"dish"};await $.createDish(e),i.showSnackbar("Gericht aus JSON erstellt"),X.value=!1,await $.fetchDishes()}catch(n){n instanceof SyntaxError?S.value=`JSON Syntax-Fehler: ${n.message}`:S.value=`Fehler: ${n.message}`}}return Me(()=>{U.fetchProducts(),b.fetchVendors(),b.fetchCategories(),$.fetchDishes()}),(n,e)=>{const o=u("v-tab"),g=u("v-tabs"),V=u("v-icon"),s=u("v-btn"),re=u("v-avatar"),A=u("v-list-item"),ee=u("v-list"),h=u("v-card-text"),N=u("v-card"),te=u("v-window-item"),ge=u("v-chip"),_=u("v-text-field"),Le=u("v-window"),L=u("v-card-title"),K=u("v-spacer"),G=u("v-card-actions"),E=u("v-dialog"),ke=u("v-select"),ye=u("v-combobox"),F=u("v-col"),ue=u("v-row"),Ke=u("v-divider"),ie=u("v-alert"),Ge=u("v-list-item-subtitle"),Ee=u("v-autocomplete"),He=u("v-checkbox"),Be=u("v-textarea");return d(),P("div",qe,[e[69]||(e[69]=c("h1",{class:"text-h5 font-weight-bold mb-4"},"Verwaltung",-1)),l(g,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=t=>z.value=t),color:"primary",class:"mb-4"},{default:a(()=>[l(o,{value:"vendors"},{default:a(()=>[...e[39]||(e[39]=[r("Händler",-1)])]),_:1}),l(o,{value:"categories"},{default:a(()=>[...e[40]||(e[40]=[r("Kategorien",-1)])]),_:1}),l(o,{value:"products"},{default:a(()=>[...e[41]||(e[41]=[r("Produkte",-1)])]),_:1}),l(o,{value:"dishes"},{default:a(()=>[...e[42]||(e[42]=[r("Gerichte",-1)])]),_:1})]),_:1},8,["modelValue"]),l(Le,{modelValue:z.value,"onUpdate:modelValue":e[9]||(e[9]=t=>z.value=t)},{default:a(()=>[l(te,{value:"vendors"},{default:a(()=>[c("div",Qe,[l(s,{color:"primary",onClick:e[1]||(e[1]=t=>ve())},{default:a(()=>[l(V,{start:"",icon:"mdi-plus"}),e[43]||(e[43]=r(" Neuer Händler ",-1))]),_:1})]),l(N,{variant:"flat",color:"surface"},{default:a(()=>[ne.value.length>0?(d(),p(ee,{key:0},{default:a(()=>[(d(!0),P(B,null,j(ne.value,t=>(d(),p(A,{key:t.id,title:t.name,onClick:w=>ve(t)},{prepend:a(()=>[l(re,{color:t.color,size:"32"},{default:a(()=>[l(V,{icon:"mdi-store",size:"small",color:"white"})]),_:1},8,["color"])]),append:a(()=>[l(s,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:le(w=>Se(t),["stop"])},null,8,["onClick"])]),_:2},1032,["title","onClick"]))),128))]),_:1})):(d(),p(h,{key:1,class:"text-center pa-8"},{default:a(()=>[...e[44]||(e[44]=[c("div",{class:"text-medium-emphasis"},"Keine Händler vorhanden",-1)])]),_:1}))]),_:1})]),_:1}),l(te,{value:"categories"},{default:a(()=>[c("div",Xe,[l(s,{color:"primary",onClick:e[2]||(e[2]=t=>fe())},{default:a(()=>[l(V,{start:"",icon:"mdi-plus"}),e[45]||(e[45]=r(" Neue Kategorie ",-1))]),_:1})]),l(N,{variant:"flat",color:"surface"},{default:a(()=>[oe.value.length>0?(d(),p(ee,{key:0},{default:a(()=>[(d(!0),P(B,null,j(oe.value,t=>(d(),p(A,{key:t.id,title:t.name,subtitle:t.vendorName,onClick:w=>fe(t)},{prepend:a(()=>[l(re,{color:t.vendorColor,size:"32"},{default:a(()=>[l(V,{icon:"mdi-tag",size:"small",color:"white"})]),_:1},8,["color"])]),append:a(()=>[l(ge,{size:"small",variant:"tonal"},{default:a(()=>[r(k(t.order),1)]),_:2},1024),l(s,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:le(w=>Ne(t),["stop"])},null,8,["onClick"])]),_:2},1032,["title","subtitle","onClick"]))),128))]),_:1})):(d(),p(h,{key:1,class:"text-center pa-8"},{default:a(()=>[...e[46]||(e[46]=[c("div",{class:"text-medium-emphasis"},"Keine Kategorien vorhanden",-1)])]),_:1}))]),_:1})]),_:1}),l(te,{value:"products"},{default:a(()=>[c("div",Ye,[l(_,{modelValue:I.value,"onUpdate:modelValue":e[3]||(e[3]=t=>I.value=t),"prepend-inner-icon":"mdi-magnify",label:"Produkte suchen...",clearable:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"]),l(s,{color:"primary",onClick:e[4]||(e[4]=t=>ce())},{default:a(()=>[l(V,{start:"",icon:"mdi-plus"}),e[47]||(e[47]=r(" Neues Produkt ",-1))]),_:1})]),l(N,{variant:"flat",color:"surface"},{default:a(()=>[me.value.length>0?(d(),p(ee,{key:0,density:"compact"},{default:a(()=>[(d(!0),P(B,null,j(me.value,t=>(d(),p(A,{key:t.id,onClick:w=>ce(t)},{default:a(()=>[c("div",el,[c("span",ll,k(t.name),1),t.categoryName?(d(),p(ge,{key:0,color:t.vendorColor,size:"x-small",label:""},{default:a(()=>[r(k(t.vendorName)+": "+k(t.categoryName),1)]),_:2},1032,["color"])):ae("",!0)]),c("div",tl,k(t.defaultUnit||"Keine Einheit")+" · "+k(t.freshnessDays)+" Tage haltbar ",1)]),append:a(()=>[l(s,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:le(w=>$e(t),["stop"])},null,8,["onClick"])]),_:2},1032,["onClick"]))),128))]),_:1})):(d(),p(h,{key:1,class:"text-center pa-8"},{default:a(()=>[...e[48]||(e[48]=[c("div",{class:"text-medium-emphasis"},"Keine Produkte gefunden",-1)])]),_:1}))]),_:1})]),_:1}),l(te,{value:"dishes"},{default:a(()=>[c("div",al,[l(_,{modelValue:I.value,"onUpdate:modelValue":e[5]||(e[5]=t=>I.value=t),"prepend-inner-icon":"mdi-magnify",label:"Gerichte suchen...",clearable:"","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"]),c("div",nl,[l(s,{variant:"tonal",color:"primary",onClick:e[6]||(e[6]=t=>ze())},{default:a(()=>[l(V,{start:"",icon:"mdi-code-json"}),e[49]||(e[49]=r(" JSON Import ",-1))]),_:1}),l(s,{color:"primary",onClick:e[7]||(e[7]=t=>pe())},{default:a(()=>[l(V,{start:"",icon:"mdi-plus"}),e[50]||(e[50]=r(" Neues Gericht ",-1))]),_:1})])]),l(N,{variant:"flat",color:"surface"},{default:a(()=>[de.value.length>0?(d(),p(ee,{key:0},{default:a(()=>[(d(!0),P(B,null,j(de.value,t=>(d(),p(A,{key:t.id,title:t.name,subtitle:`${t.defaultServings} Portionen · ${t.ingredients?.length||0} Zutaten`,onClick:w=>pe(t)},{prepend:a(()=>[l(re,{color:"primary",variant:"tonal"},{default:a(()=>[l(V,{icon:t.type==="eating_out"?"mdi-food-takeout-box":"mdi-food"},null,8,["icon"])]),_:2},1024)]),append:a(()=>[t.recipeUrl?(d(),p(s,{key:0,icon:"mdi-open-in-new",variant:"text",size:"small",href:t.recipeUrl,target:"_blank",onClick:e[8]||(e[8]=le(()=>{},["stop"]))},null,8,["href"])):ae("",!0),l(s,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:le(w=>De(t),["stop"])},null,8,["onClick"])]),_:2},1032,["title","subtitle","onClick"]))),128))]),_:1})):(d(),p(h,{key:1,class:"text-center pa-8"},{default:a(()=>[...e[51]||(e[51]=[c("div",{class:"text-medium-emphasis"},"Keine Gerichte gefunden",-1)])]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{modelValue:Z.value,"onUpdate:modelValue":e[12]||(e[12]=t=>Z.value=t),"max-width":"400"},{default:a(()=>[l(N,null,{default:a(()=>[l(L,null,{default:a(()=>[r(k(J.value?"Händler bearbeiten":"Neuer Händler"),1)]),_:1}),l(h,null,{default:a(()=>[l(_,{modelValue:x.value.name,"onUpdate:modelValue":e[10]||(e[10]=t=>x.value.name=t),label:"Name",autofocus:"",class:"mb-3"},null,8,["modelValue"]),e[52]||(e[52]=c("div",{class:"text-subtitle-2 mb-2"},"Farbe",-1)),c("div",ol,[(d(),P(B,null,j(Ve,t=>l(s,{key:t,color:t,variant:x.value.color===t?"flat":"outlined",icon:"",size:"small",onClick:w=>x.value.color=t},{default:a(()=>[x.value.color===t?(d(),p(V,{key:0,icon:"mdi-check",color:"white"})):ae("",!0)]),_:2},1032,["color","variant","onClick"])),64))])]),_:1}),l(G,null,{default:a(()=>[l(K),l(s,{variant:"text",onClick:e[11]||(e[11]=t=>Z.value=!1)},{default:a(()=>[...e[53]||(e[53]=[r("Abbrechen",-1)])]),_:1}),l(s,{color:"primary",onClick:Ce},{default:a(()=>[...e[54]||(e[54]=[r("Speichern",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{modelValue:O.value,"onUpdate:modelValue":e[16]||(e[16]=t=>O.value=t),"max-width":"400"},{default:a(()=>[l(N,null,{default:a(()=>[l(L,null,{default:a(()=>[r(k(M.value?"Kategorie bearbeiten":"Neue Kategorie"),1)]),_:1}),l(h,null,{default:a(()=>[l(_,{modelValue:C.value.name,"onUpdate:modelValue":e[13]||(e[13]=t=>C.value.name=t),label:"Name",autofocus:"",class:"mb-3"},null,8,["modelValue"]),l(ke,{modelValue:C.value.vendorId,"onUpdate:modelValue":e[14]||(e[14]=t=>C.value.vendorId=t),items:ne.value,"item-title":"name","item-value":"id",label:"Händler"},null,8,["modelValue","items"])]),_:1}),l(G,null,{default:a(()=>[l(K),l(s,{variant:"text",onClick:e[15]||(e[15]=t=>O.value=!1)},{default:a(()=>[...e[55]||(e[55]=[r("Abbrechen",-1)])]),_:1}),l(s,{color:"primary",onClick:he},{default:a(()=>[...e[56]||(e[56]=[r("Speichern",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{modelValue:T.value,"onUpdate:modelValue":e[22]||(e[22]=t=>T.value=t),"max-width":"500"},{default:a(()=>[l(N,null,{default:a(()=>[l(L,null,{default:a(()=>[r(k(W.value?"Produkt bearbeiten":"Neues Produkt"),1)]),_:1}),l(h,null,{default:a(()=>[l(_,{modelValue:y.value.name,"onUpdate:modelValue":e[17]||(e[17]=t=>y.value.name=t),label:"Name",autofocus:"",class:"mb-3"},null,8,["modelValue"]),l(ke,{modelValue:y.value.categoryId,"onUpdate:modelValue":e[18]||(e[18]=t=>y.value.categoryId=t),items:oe.value,"item-title":"displayName","item-value":"id",label:"Kategorie",clearable:"",class:"mb-3"},null,8,["modelValue","items"]),l(ue,null,{default:a(()=>[l(F,{cols:"6"},{default:a(()=>[l(ye,{modelValue:y.value.defaultUnit,"onUpdate:modelValue":e[19]||(e[19]=t=>y.value.defaultUnit=t),items:se,label:"Standard-Einheit"},null,8,["modelValue"])]),_:1}),l(F,{cols:"6"},{default:a(()=>[l(_,{modelValue:y.value.freshnessDays,"onUpdate:modelValue":e[20]||(e[20]=t=>y.value.freshnessDays=t),modelModifiers:{number:!0},label:"Haltbarkeit (Tage)",type:"number",min:"1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(G,null,{default:a(()=>[l(K),l(s,{variant:"text",onClick:e[21]||(e[21]=t=>T.value=!1)},{default:a(()=>[...e[57]||(e[57]=[r("Abbrechen",-1)])]),_:1}),l(s,{color:"primary",onClick:Ue},{default:a(()=>[...e[58]||(e[58]=[r("Speichern",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{modelValue:R.value,"onUpdate:modelValue":e[28]||(e[28]=t=>R.value=t),"max-width":"700",scrollable:""},{default:a(()=>[l(N,null,{default:a(()=>[l(L,null,{default:a(()=>[r(k(q.value?"Gericht bearbeiten":"Neues Gericht"),1)]),_:1}),l(h,null,{default:a(()=>[e[61]||(e[61]=c("div",{class:"text-subtitle-2 mb-3"},"Grunddaten",-1)),l(ue,null,{default:a(()=>[l(F,{cols:"12",md:"6"},{default:a(()=>[l(_,{modelValue:v.value.name,"onUpdate:modelValue":e[23]||(e[23]=t=>v.value.name=t),label:"Name",autofocus:""},null,8,["modelValue"])]),_:1}),l(F,{cols:"12",md:"6"},{default:a(()=>[l(_,{modelValue:v.value.recipeUrl,"onUpdate:modelValue":e[24]||(e[24]=t=>v.value.recipeUrl=t),label:"Rezept-Link",type:"url","prepend-inner-icon":"mdi-link"},null,8,["modelValue"])]),_:1}),l(F,{cols:"12",md:"4"},{default:a(()=>[l(_,{modelValue:v.value.defaultServings,"onUpdate:modelValue":e[25]||(e[25]=t=>v.value.defaultServings=t),modelModifiers:{number:!0},label:"Standard-Portionen",type:"number",min:"1",max:"20"},null,8,["modelValue"])]),_:1})]),_:1}),l(Ke,{class:"my-4"}),c("div",rl,[c("div",ul," Zutaten ("+k(v.value.ingredients.length)+") — pro Portion ",1),l(s,{variant:"tonal",color:"primary",size:"small",onClick:e[26]||(e[26]=t=>be())},{default:a(()=>[l(V,{start:"",icon:"mdi-plus"}),e[59]||(e[59]=r(" Zutat hinzufügen ",-1))]),_:1})]),v.value.ingredients.length>0?(d(),p(ee,{key:0,density:"compact"},{default:a(()=>[(d(!0),P(B,null,j(v.value.ingredients,t=>(d(),p(A,{key:t.id,title:t.productName,subtitle:`${t.amount} ${t.unit}${t.optional?" (optional)":""}`},{prepend:a(()=>[l(V,{icon:"mdi-circle-small"})]),append:a(()=>[l(s,{icon:"mdi-pencil",variant:"text",size:"small",onClick:w=>be(t)},null,8,["onClick"]),l(s,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:w=>Pe(t)},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),128))]),_:1})):(d(),p(ie,{key:1,type:"info",variant:"tonal",class:"mt-2"},{default:a(()=>[...e[60]||(e[60]=[r(" Noch keine Zutaten hinzugefügt ",-1)])]),_:1}))]),_:1}),l(G,null,{default:a(()=>[l(K),l(s,{variant:"text",onClick:e[27]||(e[27]=t=>R.value=!1)},{default:a(()=>[...e[62]||(e[62]=[r("Abbrechen",-1)])]),_:1}),l(s,{color:"primary",onClick:Ie},{default:a(()=>[...e[63]||(e[63]=[r("Speichern",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{modelValue:Q.value,"onUpdate:modelValue":e[35]||(e[35]=t=>Q.value=t),"max-width":"500"},{default:a(()=>[l(N,null,{default:a(()=>[l(L,null,{default:a(()=>[r(k(D.value?"Zutat bearbeiten":"Zutat hinzufügen"),1)]),_:1}),l(h,null,{default:a(()=>[l(Ee,{modelValue:m.value.productId,"onUpdate:modelValue":e[29]||(e[29]=t=>m.value.productId=t),items:xe.value,"item-title":"title","item-value":"value",label:"Produkt auswählen (optional)",clearable:"",class:"mb-3"},{item:a(({item:t,props:w})=>[l(A,Te(We(w)),{default:a(()=>[l(Ge,null,{default:a(()=>[r(k(t.raw.subtitle),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"]),l(_,{modelValue:m.value.productName,"onUpdate:modelValue":e[30]||(e[30]=t=>m.value.productName=t),label:"Produktname",autofocus:!D.value,class:"mb-3",hint:"Wird automatisch ausgefüllt, wenn ein Produkt ausgewählt wurde"},null,8,["modelValue","autofocus"]),l(ue,null,{default:a(()=>[l(F,{cols:"6"},{default:a(()=>[l(_,{modelValue:m.value.amount,"onUpdate:modelValue":e[31]||(e[31]=t=>m.value.amount=t),modelModifiers:{number:!0},label:"Menge pro Portion",type:"number",min:"0",step:"0.1"},null,8,["modelValue"])]),_:1}),l(F,{cols:"6"},{default:a(()=>[l(ye,{modelValue:m.value.unit,"onUpdate:modelValue":e[32]||(e[32]=t=>m.value.unit=t),items:se,label:"Einheit"},null,8,["modelValue"])]),_:1})]),_:1}),l(He,{modelValue:m.value.optional,"onUpdate:modelValue":e[33]||(e[33]=t=>m.value.optional=t),label:"Optional","hide-details":""},null,8,["modelValue"])]),_:1}),l(G,null,{default:a(()=>[l(K),l(s,{variant:"text",onClick:e[34]||(e[34]=t=>Q.value=!1)},{default:a(()=>[...e[64]||(e[64]=[r(" Abbrechen ",-1)])]),_:1}),l(s,{color:"primary",onClick:Fe},{default:a(()=>[r(k(D.value?"Speichern":"Hinzufügen"),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{modelValue:X.value,"onUpdate:modelValue":e[38]||(e[38]=t=>X.value=t),"max-width":"800",scrollable:""},{default:a(()=>[l(N,null,{default:a(()=>[l(L,null,{default:a(()=>[...e[65]||(e[65]=[r("Gericht aus JSON importieren",-1)])]),_:1}),l(h,null,{default:a(()=>[l(ie,{type:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[...e[66]||(e[66]=[c("div",{class:"text-subtitle-2 mb-2"},"Erwartetes Format:",-1),c("pre",{class:"text-caption"},`{
  "name": "Gericht Name",
  "recipeUrl": "https://...",
  "defaultServings": 2,
  "ingredients": [
    {
      "productName": "Zutat 1",
      "amount": 200,
      "unit": "g",
      "optional": false
    }
  ]
}`,-1)])]),_:1}),l(Be,{modelValue:Y.value,"onUpdate:modelValue":e[36]||(e[36]=t=>Y.value=t),label:"JSON eingeben",rows:"15","auto-grow":"",class:"json-input"},null,8,["modelValue"]),S.value?(d(),p(ie,{key:0,type:"error",variant:"tonal",class:"mt-3"},{default:a(()=>[r(k(S.value),1)]),_:1})):ae("",!0)]),_:1}),l(G,null,{default:a(()=>[l(K),l(s,{variant:"text",onClick:e[37]||(e[37]=t=>X.value=!1)},{default:a(()=>[...e[67]||(e[67]=[r("Abbrechen",-1)])]),_:1}),l(s,{color:"primary",onClick:Ae,disabled:!Y.value.trim()},{default:a(()=>[...e[68]||(e[68]=[r(" Importieren ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},vl=Re(il,[["__scopeId","data-v-c4931512"]]);export{vl as default};
