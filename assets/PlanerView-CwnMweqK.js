import{c as I,r as m,a as g,o,b as r,d as t,F as x,e as A,n as de,f as W,g as C,t as _,w as Ue,h as l,i as w,j as Be,k as s,l as Ke,u as ot,m as ut,p as dt,q as rt,s as Le,v as Te}from"./index-D5VVg6a_.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const mt={class:"meal-slot"},ct={class:"meal-items-container"},vt={class:"meals-list"},ft=["onClick"],pt={class:"meal-content"},gt={class:"d-flex align-center gap-1"},wt={class:"meal-name"},_t={key:0,class:"meal-servings"},yt={class:"meal-actions"},bt={__name:"MealSlot",props:{meals:{type:Array,default:()=>[]},date:String,slotId:String,slotName:String,editingMealId:String},emits:["add","edit","delete","cancelEdit"],setup(H,{emit:E}){const $=H,c=E,N=I(()=>$.meals.length>0);return(O,k)=>{const S=m("v-icon"),y=m("v-btn");return o(),g("div",mt,[r("div",ct,[r("div",vt,[(o(!0),g(x,null,A(H.meals,v=>(o(),g("div",{key:v.id,class:de(["meal-item",{"meal-committed":v.committed,"meal-editing":H.editingMealId===v.id}]),onClick:u=>c("edit",v)},[r("div",pt,[r("div",gt,[r("span",wt,_(v.dishName||"Leer"),1),v.committed?(o(),C(S,{key:0,icon:"mdi-cart-check",size:"x-small",class:"committed-icon"})):W("",!0)]),v.servings?(o(),g("span",_t,_(v.servings)+" Portionen ",1)):W("",!0)]),r("div",yt,[H.editingMealId===v.id?(o(),C(y,{key:0,icon:"mdi-close-circle",size:"x-small",variant:"text",density:"compact",class:"cancel-btn",color:"primary",onClick:k[0]||(k[0]=Ue(u=>c("cancelEdit"),["stop"]))})):(o(),C(y,{key:1,icon:"mdi-close",size:"x-small",variant:"text",density:"compact",class:"delete-btn",onClick:Ue(u=>c("delete",v),["stop"])},null,8,["onClick"]))])],10,ft))),128))]),t(y,{variant:"text",size:(N.value,"small"),color:"primary",class:de(N.value?"add-more-btn":"add-btn"),onClick:k[1]||(k[1]=v=>c("add"))},{default:l(()=>[t(S,{icon:"mdi-plus",size:(N.value,"small")},null,8,["size"])]),_:1},8,["size","class"])])])}}},Fe=Se(bt,[["__scopeId","data-v-4c65246e"]]),ht={class:"d-flex gap-2 mb-3"},kt={key:1,class:"text-center py-4"},Dt={class:"text-h6 mb-1"},xt={class:"text-body-2 text-medium-emphasis mb-4"},St={class:"d-flex justify-center gap-2"},Vt={__name:"DishSelector",props:{modelValue:Boolean,dishes:{type:Array,default:()=>[]},initialDish:{type:Object,default:null},initialServings:{type:Number,default:null},showCancel:{type:Boolean,default:!1}},emits:["update:modelValue","select","cancel"],setup(H,{emit:E}){const $=H,c=E,N=w(""),O=w("all"),k=w(null),S=w(2),y=w(!1),v=w(""),u=I(()=>{const b=new Set;$.dishes.forEach(h=>{h.categories&&Array.isArray(h.categories)&&h.categories.forEach(M=>b.add(M))});const n=Array.from(b).sort();return[{value:"all",title:"Alle"},...n.map(h=>({value:h,title:h}))]}),U=I(()=>{let b=$.dishes;if(O.value!=="all"&&(b=b.filter(n=>n.categories&&n.categories.includes(O.value))),N.value){const n=N.value.toLowerCase();b=b.filter(h=>h.name.toLowerCase().includes(n))}return[...b].sort((n,h)=>n.name.localeCompare(h.name))});function j(b){if(b.type==="eating_out"){y.value=!0,v.value="Holschompf";return}k.value=b,S.value=b?.defaultServings||2}function G(){c("select",{dish:{id:null,type:"eating_out",name:v.value},servings:0}),y.value=!1,v.value="",c("update:modelValue",!1)}function X(){c("select",{dish:k.value,servings:S.value}),c("update:modelValue",!1)}function R(){k.value=null}function L(){c("update:modelValue",!1)}function Y(){c("cancel"),c("update:modelValue",!1)}return Be(()=>$.modelValue,b=>{b&&(N.value="",O.value="all",k.value=$.initialDish,S.value=$.initialServings||2,y.value=!1,v.value="")}),(b,n)=>{const h=m("v-spacer"),M=m("v-btn"),q=m("v-card-title"),T=m("v-text-field"),V=m("v-icon"),F=m("v-chip"),ee=m("v-chip-group"),le=m("v-list-item"),_e=m("v-list-item-title"),re=m("v-list"),me=m("v-card-text"),te=m("v-card"),ce=m("v-dialog"),ie=m("v-card-actions");return o(),g(x,null,[t(ce,{"model-value":H.modelValue,"onUpdate:modelValue":n[6]||(n[6]=f=>c("update:modelValue",f)),"max-width":"500",scrollable:""},{default:l(()=>[t(te,null,{default:l(()=>[t(q,{class:"d-flex align-center pa-4 pb-2"},{default:l(()=>[n[10]||(n[10]=r("span",null,"Gericht wählen",-1)),t(h),t(M,{icon:"mdi-close",variant:"text",size:"small",onClick:L})]),_:1}),t(me,{class:"pa-4 pt-0"},{default:l(()=>[k.value?(o(),g("div",kt,[t(V,{icon:k.value.type==="eating_out"?"mdi-food-takeout-box":"mdi-food",size:"48",color:"primary",class:"mb-3"},null,8,["icon"]),r("div",Dt,_(k.value.name),1),r("div",xt," Standard: "+_(k.value.defaultServings)+" Portionen ",1),t(T,{modelValue:S.value,"onUpdate:modelValue":n[5]||(n[5]=f=>S.value=f),modelModifiers:{number:!0},label:"Portionen",type:"number",inputmode:"decimal",min:"1",max:"20",style:{"min-width":"200px","max-width":"200px",margin:"0 auto"},"hide-details":"",class:"mb-4 centered-input",autofocus:""},{prepend:l(()=>[t(M,{icon:"mdi-minus",size:"small",variant:"text",disabled:S.value<=1,onClick:n[3]||(n[3]=f=>S.value--)},null,8,["disabled"])]),append:l(()=>[t(M,{icon:"mdi-plus",size:"small",variant:"text",disabled:S.value>=20,onClick:n[4]||(n[4]=f=>S.value++)},null,8,["disabled"])]),_:1},8,["modelValue"]),r("div",St,[H.showCancel?W("",!0):(o(),C(M,{key:0,variant:"text",onClick:R},{default:l(()=>[t(V,{start:"",icon:"mdi-arrow-left"}),n[13]||(n[13]=s(" Zurück ",-1))]),_:1})),H.showCancel?(o(),C(M,{key:1,variant:"text",onClick:Y},{default:l(()=>[t(V,{start:"",icon:"mdi-close"}),n[14]||(n[14]=s(" Abbrechen ",-1))]),_:1})):W("",!0),t(M,{color:"primary",onClick:X},{default:l(()=>[t(V,{start:"",icon:"mdi-check"}),n[15]||(n[15]=s(" Hinzufügen ",-1))]),_:1})])])):(o(),g(x,{key:0},[t(T,{modelValue:N.value,"onUpdate:modelValue":n[0]||(n[0]=f=>N.value=f),"prepend-inner-icon":"mdi-magnify",label:"Suchen...",clearable:"","hide-details":"",class:"mb-3"},null,8,["modelValue"]),r("div",ht,[t(F,{variant:"outlined",color:"accent",onClick:n[1]||(n[1]=f=>j({id:"eating_out",type:"eating_out",name:"Auswärts essen"}))},{default:l(()=>[t(V,{start:"",icon:"mdi-food-takeout-box"}),n[11]||(n[11]=s(" Auswärts ",-1))]),_:1})]),t(ee,{modelValue:O.value,"onUpdate:modelValue":n[2]||(n[2]=f=>O.value=f),"selected-class":"bg-primary text-white",mandatory:"",class:"mb-3"},{default:l(()=>[(o(!0),g(x,null,A(u.value,f=>(o(),C(F,{key:f.value,value:f.value,variant:"outlined",size:"small"},{default:l(()=>[s(_(f.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(re,{density:"compact",class:"dish-list"},{default:l(()=>[(o(!0),g(x,null,A(U.value,f=>(o(),C(le,{key:f.id,title:f.name,subtitle:f.categories&&f.categories.length>0?f.categories.join(", "):"Keine Kategorie",onClick:oe=>j(f)},{prepend:l(()=>[t(V,{icon:f.type==="eating_out"?"mdi-food-takeout-box":"mdi-food",color:f.type==="eating_out"?"accent":"primary"},null,8,["icon","color"])]),append:l(()=>[t(V,{icon:"mdi-chevron-right",size:"small"})]),_:2},1032,["title","subtitle","onClick"]))),128)),U.value.length===0?(o(),C(le,{key:0},{default:l(()=>[t(_e,{class:"text-medium-emphasis text-center"},{default:l(()=>[...n[12]||(n[12]=[s(" Keine Gerichte gefunden ",-1)])]),_:1})]),_:1})):W("",!0)]),_:1})],64))]),_:1})]),_:1})]),_:1},8,["model-value"]),t(ce,{modelValue:y.value,"onUpdate:modelValue":n[9]||(n[9]=f=>y.value=f),"max-width":"400"},{default:l(()=>[t(te,null,{default:l(()=>[t(q,null,{default:l(()=>[...n[16]||(n[16]=[s("Auswärts essen",-1)])]),_:1}),t(me,null,{default:l(()=>[t(T,{modelValue:v.value,"onUpdate:modelValue":n[7]||(n[7]=f=>v.value=f),label:"Beschreibung",autofocus:"",onKeyup:Ke(G,["enter"])},null,8,["modelValue"])]),_:1}),t(ie,null,{default:l(()=>[t(h),t(M,{variant:"text",onClick:n[8]||(n[8]=f=>y.value=!1)},{default:l(()=>[...n[17]||(n[17]=[s("Abbrechen",-1)])]),_:1}),t(M,{color:"primary",onClick:G},{default:l(()=>[...n[18]||(n[18]=[s("Hinzufügen",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},zt=Se(Vt,[["__scopeId","data-v-391fbe8a"]]),Mt={class:"planer-view"},Ct={class:"d-flex align-center justify-center mb-2"},$t={class:"text-body-2 font-weight-medium"},Nt={class:"d-flex align-center justify-space-between"},Et={class:"d-flex gap-2 align-center"},It={key:0,class:"mobile-planer"},At={class:"week-divider d-flex align-center my-2"},Ut={class:"text-body-1 font-weight-bold"},Lt={class:"text-body-1 ml-2"},Tt={class:"slot-label-mobile text-caption text-medium-emphasis d-flex align-center",style:{"min-width":"110px","flex-shrink":"0"}},Ft={style:{"white-space":"nowrap"}},Bt={class:"flex-grow-1"},Kt={key:1,class:"desktop-planer"},Wt={class:"week-divider d-flex align-center my-3"},Ht={class:"week-grid-wrapper"},Ot={class:"week-grid"},Rt={class:"day-name"},Pt={class:"day-number"},Zt={class:"slot-label"},jt={style:{"white-space":"nowrap"}},Gt={class:"mb-3"},Yt={class:"flex-grow-1"},qt={class:"d-flex align-center"},Jt={key:0,class:"text-caption text-medium-emphasis ml-8"},Qt={__name:"PlanerView",setup(H){const E=ot(),$=ut(),c=dt(),N=rt(),O=new Date;O.setHours(0,0,0,0);const k=new Date(O);k.setDate(k.getDate()-3);const S=new Date(O);S.setDate(S.getDate()+3);const y=w(k),v=w(S),u=w(null),U=w(!1),j=w(!1),G=w(!1),X=w(!1),R=w(!1),L=w(!1),Y=w(!1),b=w(!1),n=w(""),h=w(!1),M=w(null),q=w(null),T=w(null),V=w(null),F=w(null),ee=w(null),le=w(window.innerWidth),_e=I(()=>le.value<600),re=I(()=>L.value&&u.value&&!u.value.isNew?u.value.id:null);Le(()=>{window.addEventListener("resize",()=>{le.value=window.innerWidth}),he(),setTimeout(()=>{me()},100)});function me(){const a=document.querySelector(".bg-primary.text-white");if(a){const d=a.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:d-144,behavior:"smooth"})}}const te=[{id:"breakfast",name:"Frühstück",icon:"mdi-coffee"},{id:"lunch",name:"Mittagessen",icon:"mdi-food"},{id:"dinner",name:"Abendessen",icon:"mdi-food-variant"}],ce=I(()=>{const a=[],e=new Date(y.value),d=new Date(v.value);for(;e<=d;)a.push({date:ae(e),dayName:We(e),dayNameFull:He(e),dayNumber:e.getDate(),month:e.getMonth()+1,isToday:Oe(e),isPast:Re(e),isMonday:e.getDay()===1,weekNumber:Pe(e)}),e.setDate(e.getDate()+1);return a}),ie=I(()=>{const a=new Map;for(const e of ce.value){const d=`${e.date.substring(0,4)}-W${e.weekNumber}`;a.has(d)||a.set(d,{weekNumber:e.weekNumber,days:[]}),a.get(d).days.push(e)}return Array.from(a.values())}),f=I(()=>`${Me(y.value)} – ${Me(v.value)}`);I(()=>ie.value.length);const oe=I(()=>E.meals.filter(a=>a.date>=ae(y.value)&&a.date<=ae(v.value)&&a.dishId&&!a.committed)),Ve=I(()=>oe.value.length),ze=I(()=>{if(oe.value.length===0)return{from:null,to:null};const a=oe.value.map(e=>e.date).sort();return{from:a[0],to:a[a.length-1]}}),ve=I(()=>!V.value||!F.value?[]:oe.value.filter(a=>a.date>=V.value&&a.date<=F.value));function ae(a){return a.toISOString().split("T")[0]}function Me(a){const e=new Date(a);return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()}`}function We(a){return["So","Mo","Di","Mi","Do","Fr","Sa"][a.getDay()]}function He(a){return["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"][a.getDay()]}function Oe(a){const e=new Date;return a.toDateString()===e.toDateString()}function Re(a){const e=new Date;return e.setHours(0,0,0,0),a<e}function Pe(a){const e=new Date(a);e.setHours(0,0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));const d=new Date(e.getFullYear(),0,1);return Math.ceil(((e-d)/864e5+1)/7)}function Ze(){const a=new Date(y.value);a.setDate(a.getDate()-7);const e=new Date(v.value);e.setDate(e.getDate()-7),y.value=a,v.value=e}function je(){const a=new Date(y.value);a.setDate(a.getDate()+7);const e=new Date(v.value);e.setDate(e.getDate()+7),y.value=a,v.value=e}function Ge(){const a=new Date(y.value);a.setDate(a.getDate()-7),y.value=a}function Ye(){const a=new Date(v.value);a.setDate(a.getDate()+7),v.value=a}function qe(){const a=new Date;a.setHours(0,0,0,0);const e=new Date(a);e.setDate(e.getDate()-3);const d=new Date(a);d.setDate(d.getDate()+3),y.value=e,v.value=d}function Ce(a,e){return E.getMealsForDate(a).filter(d=>d.slotId===e)}function $e(a,e,d){u.value={date:a,slotId:e,slotName:d,isNew:!0},j.value=!0}async function Ne(a){if(u.value={...a,isNew:!1},!a.dishId&&a.dishName)Y.value=!0;else if(a.committed){if(U.value=!1,a.dishId)try{const d=await $.fetchDish(a.dishId);U.value=!!d?.recipeUrl}catch{}R.value=!0}else{if(U.value=!1,a.dishId)try{const d=await $.fetchDish(a.dishId);U.value=!!d?.recipeUrl}catch{}L.value=!0}}function Je(){L.value=!1,j.value=!0}function Ee(){R.value=!1,L.value=!1,M.value=u.value.date,q.value=u.value.slotId,h.value=!0}async function Qe(){try{await E.updateMeal(u.value.id,{date:M.value,slotId:q.value,slotName:te.find(a=>a.id===q.value)?.name}),h.value=!1,c.showSnackbar("Mahlzeit verschoben")}catch{c.showSnackbar("Fehler beim Verschieben","error")}}async function Ie(){if(!u.value?.dishId){c.showSnackbar("Kein Rezept verfügbar","warning");return}try{const a=await $.fetchDish(u.value.dishId);a?.recipeUrl?(window.open(a.recipeUrl,"_blank"),R.value=!1):c.showSnackbar("Kein Rezept-Link hinterlegt","warning")}catch{c.showSnackbar("Fehler beim Laden des Rezepts","error")}}async function Xe({dish:a,servings:e}){try{u.value.isNew?(await E.createMeal({date:u.value.date,slotId:u.value.slotId,slotName:u.value.slotName,dishId:a?.id||null,dishName:a?.type==="eating_out"?a.name:void 0,servings:e||2}),c.showSnackbar("Mahlzeit hinzugefügt")):(await E.updateMeal(u.value.id,{dishId:a?.id||null,dishName:a?.type==="eating_out"?a.name:void 0,servings:e||u.value.servings}),c.showSnackbar("Mahlzeit aktualisiert"))}catch{c.showSnackbar("Fehler beim Speichern","error")}j.value=!1}function ye(){L.value=!1,u.value=null}function et(){n.value=u.value.dishName,Y.value=!1,b.value=!0}async function Ae(){try{await E.updateMeal(u.value.id,{dishName:n.value}),b.value=!1,n.value="",c.showSnackbar("Beschreibung aktualisiert")}catch{c.showSnackbar("Fehler beim Speichern","error")}}function tt(){Y.value=!1,T.value=u.value,be()}function fe(a){a.committed?(T.value=a,X.value=!0):(T.value=a,be())}async function be(){try{if(!T.value)return;await E.deleteMeal(T.value.id),c.showSnackbar("Mahlzeit gelöscht"),X.value=!1,T.value=null}catch{c.showSnackbar("Fehler beim Löschen","error")}}async function he(){const a=ae(y.value),e=ae(v.value);await Promise.all([E.fetchMeals(a,e),$.fetchDishes()])}function lt(){V.value=ze.value.from,F.value=ze.value.to,ee.value=ae(new Date),G.value=!0}async function at(){try{if(!V.value||!F.value){c.showSnackbar("Bitte wähle einen Zeitraum","warning");return}if(!ee.value){c.showSnackbar("Bitte wähle ein Einkaufsdatum","warning");return}if(ve.value.length===0){c.showSnackbar("Keine Mahlzeiten im gewählten Zeitraum","warning");return}await N.generateList(V.value,F.value,ee.value),N.shoppingList?.mealIds?.length>0&&(await E.commitMeals(N.shoppingList.mealIds),c.showSnackbar(`${N.shoppingList.mealIds.length} Mahlzeiten zur Einkaufsliste hinzugefügt`)),G.value=!1}catch{c.showSnackbar("Fehler beim Erstellen der Einkaufsliste","error")}}return Be([y,v],he),Le(()=>{window.addEventListener("resize",()=>{le.value=window.innerWidth}),he()}),(a,e)=>{const d=m("v-icon"),D=m("v-btn"),B=m("v-card-text"),K=m("v-card"),J=m("v-divider"),ke=m("v-chip"),Q=m("v-card-title"),ue=m("v-text-field"),pe=m("v-alert"),ne=m("v-spacer"),ge=m("v-card-actions"),we=m("v-dialog"),P=m("v-list-item-title"),Z=m("v-list-item"),De=m("v-list"),xe=m("v-bottom-sheet"),se=m("v-list-item-subtitle"),nt=m("v-select"),st=m("v-badge");return o(),g("div",Mt,[t(K,{class:"mb-4 sticky-nav",variant:"flat",color:"surface"},{default:l(()=>[t(B,{class:"pa-3"},{default:l(()=>[r("div",Ct,[r("span",$t,_(f.value),1)]),r("div",Nt,[t(D,{variant:"text",size:"small",onClick:Ze},{default:l(()=>[t(d,{start:"",icon:"mdi-chevron-left"}),e[23]||(e[23]=s(" Vorherige ",-1))]),_:1}),r("div",Et,[t(D,{variant:"tonal",color:"primary",size:"small",onClick:qe},{default:l(()=>[...e[24]||(e[24]=[s(" Heute ",-1)])]),_:1})]),t(D,{variant:"text",size:"small",onClick:je},{default:l(()=>[e[25]||(e[25]=s(" Nächste ",-1)),t(d,{end:"",icon:"mdi-chevron-right"})]),_:1})])]),_:1})]),_:1}),t(K,{class:"mb-4",variant:"flat",color:"surface"},{default:l(()=>[t(B,{class:"pa-2"},{default:l(()=>[t(D,{block:"",variant:"tonal",color:"primary",onClick:Ge},{default:l(()=>[t(d,{start:"",icon:"mdi-chevron-up"}),e[26]||(e[26]=s(" Frühere Tage anzeigen ",-1))]),_:1})]),_:1})]),_:1}),_e.value?(o(),g("div",It,[(o(!0),g(x,null,A(ie.value,i=>(o(),g(x,{key:i.weekNumber},[r("div",At,[t(J,{class:"flex-grow-1"}),t(ke,{size:"small",variant:"outlined",class:"mx-2",style:{"min-width":"60px"}},{default:l(()=>[s(" KW "+_(i.weekNumber),1)]),_:2},1024),t(J,{class:"flex-grow-1"})]),(o(!0),g(x,null,A(i.days,p=>(o(),C(K,{key:p.date,class:"mb-3",variant:"flat",color:"surface"},{default:l(()=>[t(Q,{class:de(["d-flex align-center py-2 px-3",{"bg-primary text-white":p.isToday}])},{default:l(()=>[r("span",Ut,_(p.dayNameFull),1),r("span",Lt,_(p.dayNumber)+"."+_(p.month)+".",1),p.isToday?(o(),C(ke,{key:0,size:"x-small",color:"white",variant:"outlined",class:"ml-2"},{default:l(()=>[...e[27]||(e[27]=[s(" Heute ",-1)])]),_:1})):W("",!0)]),_:2},1032,["class"]),t(J),t(B,{class:"pa-2"},{default:l(()=>[(o(),g(x,null,A(te,z=>r("div",{key:`${p.date}-${z.id}`,class:"mobile-meal-row d-flex align-center py-2"},[r("div",Tt,[t(d,{icon:z.icon,size:"small",class:"mr-1"},null,8,["icon"]),r("span",Ft,_(z.name),1)]),r("div",Bt,[t(Fe,{meals:Ce(p.date,z.id),date:p.date,"slot-id":z.id,"slot-name":z.name,"editing-meal-id":re.value,onAdd:it=>$e(p.date,z.id,z.name),onEdit:Ne,onDelete:fe,onCancelEdit:ye},null,8,["meals","date","slot-id","slot-name","editing-meal-id","onAdd"])])])),64))]),_:2},1024)]),_:2},1024))),128))],64))),128))])):(o(),g("div",Kt,[(o(!0),g(x,null,A(ie.value,i=>(o(),g(x,{key:i.weekNumber},[r("div",Wt,[t(J,{class:"flex-grow-1"}),t(ke,{size:"small",variant:"tonal",color:"primary",class:"mx-3"},{default:l(()=>[s(" Kalenderwoche "+_(i.weekNumber),1)]),_:2},1024),t(J,{class:"flex-grow-1"})]),r("div",Ht,[r("div",Ot,[e[28]||(e[28]=r("div",{class:"day-header empty-cell"},null,-1)),(o(!0),g(x,null,A(i.days,p=>(o(),g("div",{key:p.date,class:de(["day-header",{today:p.isToday,past:p.isPast}])},[r("span",Rt,_(p.dayName),1),r("span",Pt,_(p.dayNumber)+"."+_(p.month)+".",1)],2))),128)),(o(!0),g(x,null,A(7-i.days.length,p=>(o(),g("div",{key:"empty-header-"+p,class:"day-header empty-day"}))),128)),(o(),g(x,null,A(te,p=>(o(),g(x,{key:p.id},[r("div",Zt,[t(d,{icon:p.icon,size:"small",class:"mr-1",style:{"flex-shrink":"0"}},null,8,["icon"]),r("span",jt,_(p.name),1)]),(o(!0),g(x,null,A(i.days,z=>(o(),g("div",{key:`${z.date}-${p.id}`,class:de(["meal-cell",{past:z.isPast}])},[t(Fe,{meals:Ce(z.date,p.id),date:z.date,"slot-id":p.id,"slot-name":p.name,"editing-meal-id":re.value,onAdd:it=>$e(z.date,p.id,p.name),onEdit:Ne,onDelete:fe,onCancelEdit:ye},null,8,["meals","date","slot-id","slot-name","editing-meal-id","onAdd"])],2))),128)),(o(!0),g(x,null,A(7-i.days.length,z=>(o(),g("div",{key:"empty-cell-"+p.id+"-"+z,class:"meal-cell empty-day"}))),128))],64))),64))])])],64))),128))])),t(K,{class:"mt-4",variant:"flat",color:"surface"},{default:l(()=>[t(B,{class:"pa-2"},{default:l(()=>[t(D,{block:"",variant:"tonal",color:"primary",onClick:Ye},{default:l(()=>[t(d,{start:"",icon:"mdi-chevron-down"}),e[29]||(e[29]=s(" Spätere Tage anzeigen ",-1))]),_:1})]),_:1})]),_:1}),t(zt,{modelValue:j.value,"onUpdate:modelValue":e[0]||(e[0]=i=>j.value=i),dishes:Te($).dishes,"initial-dish":u.value?.dishId?Te($).dishes.find(i=>i.id===u.value.dishId):null,"initial-servings":u.value?.servings,"show-cancel":!u.value?.isNew,onSelect:Xe,onCancel:ye},null,8,["modelValue","dishes","initial-dish","initial-servings","show-cancel"]),t(we,{modelValue:G.value,"onUpdate:modelValue":e[5]||(e[5]=i=>G.value=i),"max-width":"500"},{default:l(()=>[t(K,null,{default:l(()=>[t(Q,null,{default:l(()=>[...e[30]||(e[30]=[s("Einkaufsliste erstellen",-1)])]),_:1}),t(B,null,{default:l(()=>[e[34]||(e[34]=r("p",{class:"mb-3"}," Wähle den Zeitraum für die Einkaufsliste: ",-1)),t(ue,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=i=>V.value=i),label:"Von",type:"date",class:"mb-3"},null,8,["modelValue"]),t(ue,{modelValue:F.value,"onUpdate:modelValue":e[2]||(e[2]=i=>F.value=i),label:"Bis",type:"date",class:"mb-3"},null,8,["modelValue"]),t(ue,{modelValue:ee.value,"onUpdate:modelValue":e[3]||(e[3]=i=>ee.value=i),label:"Einkaufsdatum",type:"date",class:"mb-3",hint:"Wann möchtest du einkaufen gehen?","persistent-hint":""},null,8,["modelValue"]),ve.value.length>0?(o(),C(pe,{key:0,type:"success",variant:"tonal",density:"compact",class:"mb-3"},{default:l(()=>[r("strong",null,_(ve.value.length)+" Mahlzeit(en)",1),e[31]||(e[31]=s(" werden hinzugefügt ",-1))]),_:1})):V.value&&F.value?(o(),C(pe,{key:1,type:"warning",variant:"tonal",density:"compact",class:"mb-3"},{default:l(()=>[...e[32]||(e[32]=[s(" Keine Mahlzeiten im gewählten Zeitraum ",-1)])]),_:1})):W("",!0),t(pe,{type:"info",variant:"tonal",density:"compact"},{default:l(()=>[...e[33]||(e[33]=[s(' Die ausgewählten Mahlzeiten werden als "zur Einkaufsliste hinzugefügt" markiert. Bereits vorhandene Artikel in der Liste bleiben erhalten. ',-1)])]),_:1})]),_:1}),t(ge,null,{default:l(()=>[t(ne),t(D,{variant:"text",onClick:e[4]||(e[4]=i=>G.value=!1)},{default:l(()=>[...e[35]||(e[35]=[s("Abbrechen",-1)])]),_:1}),t(D,{color:"success",disabled:ve.value.length===0,onClick:at},{default:l(()=>[t(d,{start:"",icon:"mdi-cart-plus"}),e[36]||(e[36]=s(" Hinzufügen ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(we,{modelValue:X.value,"onUpdate:modelValue":e[7]||(e[7]=i=>X.value=i),"max-width":"500"},{default:l(()=>[t(K,null,{default:l(()=>[t(Q,null,{default:l(()=>[...e[37]||(e[37]=[s("Mahlzeit löschen?",-1)])]),_:1}),t(B,null,{default:l(()=>[r("p",Gt,[r("strong",null,_(T.value?.dishName),1),e[38]||(e[38]=s(" wurde bereits zur Einkaufsliste hinzugefügt. ",-1))]),t(pe,{type:"warning",variant:"tonal",density:"compact"},{default:l(()=>[...e[39]||(e[39]=[s(" Die Zutaten bleiben auf der Einkaufsliste, auch wenn du diese Mahlzeit löschst. ",-1)])]),_:1})]),_:1}),t(ge,null,{default:l(()=>[t(ne),t(D,{variant:"text",onClick:e[6]||(e[6]=i=>X.value=!1)},{default:l(()=>[...e[40]||(e[40]=[s("Abbrechen",-1)])]),_:1}),t(D,{color:"error",onClick:be},{default:l(()=>[...e[41]||(e[41]=[s(" Trotzdem löschen ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(xe,{modelValue:Y.value,"onUpdate:modelValue":e[9]||(e[9]=i=>Y.value=i),"max-width":"500"},{default:l(()=>[t(K,null,{default:l(()=>[t(Q,{class:"d-flex align-center pa-4"},{default:l(()=>[t(d,{icon:"mdi-food-takeout-box",class:"mr-2"}),s(" "+_(u.value?.dishName||"Auswärts essen")+" ",1),t(ne),t(D,{icon:"mdi-close",variant:"text",size:"small",onClick:e[8]||(e[8]=i=>Y.value=!1)})]),_:1}),t(B,{class:"pa-2"},{default:l(()=>[t(De,{density:"compact"},{default:l(()=>[t(Z,{onClick:et,"prepend-icon":"mdi-pencil"},{default:l(()=>[t(P,null,{default:l(()=>[...e[42]||(e[42]=[s("Beschreibung ändern",-1)])]),_:1})]),_:1}),t(J,{class:"my-2"}),t(Z,{onClick:tt,"prepend-icon":"mdi-delete",class:"text-error"},{default:l(()=>[t(P,null,{default:l(()=>[...e[43]||(e[43]=[s("Mahlzeit löschen",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(we,{modelValue:b.value,"onUpdate:modelValue":e[12]||(e[12]=i=>b.value=i),"max-width":"400"},{default:l(()=>[t(K,null,{default:l(()=>[t(Q,null,{default:l(()=>[...e[44]||(e[44]=[s("Beschreibung ändern",-1)])]),_:1}),t(B,null,{default:l(()=>[t(ue,{modelValue:n.value,"onUpdate:modelValue":e[10]||(e[10]=i=>n.value=i),label:"Beschreibung",autofocus:"",onKeyup:Ke(Ae,["enter"])},null,8,["modelValue"])]),_:1}),t(ge,null,{default:l(()=>[t(ne),t(D,{variant:"text",onClick:e[11]||(e[11]=i=>b.value=!1)},{default:l(()=>[...e[45]||(e[45]=[s("Abbrechen",-1)])]),_:1}),t(D,{color:"primary",onClick:Ae},{default:l(()=>[...e[46]||(e[46]=[s("Speichern",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(xe,{modelValue:L.value,"onUpdate:modelValue":e[15]||(e[15]=i=>L.value=i),"max-width":"500"},{default:l(()=>[t(K,null,{default:l(()=>[t(Q,{class:"d-flex align-center pa-4"},{default:l(()=>[r("div",Yt,[r("div",qt,[t(d,{icon:u.value?.dishId?"mdi-food":"mdi-silverware-fork-knife",class:"mr-2"},null,8,["icon"]),s(" "+_(u.value?.dishName||"Leer"),1)]),u.value?.servings?(o(),g("div",Jt,_(u.value.servings)+" Portionen ",1)):W("",!0)]),t(D,{icon:"mdi-close",variant:"text",size:"small",onClick:e[13]||(e[13]=i=>L.value=!1)})]),_:1}),t(B,{class:"pa-2"},{default:l(()=>[t(De,{density:"compact"},{default:l(()=>[t(Z,{onClick:Ee,"prepend-icon":"mdi-arrow-all"},{default:l(()=>[t(P,null,{default:l(()=>[...e[47]||(e[47]=[s("Mahlzeit verschieben",-1)])]),_:1}),t(se,null,{default:l(()=>[...e[48]||(e[48]=[s("Datum oder Slot ändern",-1)])]),_:1})]),_:1}),t(Z,{onClick:Je,"prepend-icon":"mdi-pencil"},{default:l(()=>[t(P,null,{default:l(()=>[...e[49]||(e[49]=[s("Mahlzeit bearbeiten",-1)])]),_:1}),t(se,null,{default:l(()=>[...e[50]||(e[50]=[s("Gericht oder Portionen ändern",-1)])]),_:1})]),_:1}),u.value?.dishId?(o(),C(Z,{key:0,onClick:Ie,"prepend-icon":"mdi-book-open-variant",disabled:!U.value},{default:l(()=>[t(P,null,{default:l(()=>[...e[51]||(e[51]=[s("Rezept anzeigen",-1)])]),_:1}),t(se,null,{default:l(()=>[s(_(U.value?"Zutaten und Zubereitung":"Kein Rezept-Link hinterlegt"),1)]),_:1})]),_:1},8,["disabled"])):W("",!0),t(J,{class:"my-2"}),t(Z,{onClick:e[14]||(e[14]=i=>{fe(u.value),L.value=!1}),"prepend-icon":"mdi-delete",class:"text-error"},{default:l(()=>[t(P,null,{default:l(()=>[...e[52]||(e[52]=[s("Mahlzeit löschen",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(xe,{modelValue:R.value,"onUpdate:modelValue":e[18]||(e[18]=i=>R.value=i),"max-width":"500"},{default:l(()=>[t(K,null,{default:l(()=>[t(Q,{class:"d-flex align-center pa-4"},{default:l(()=>[t(d,{icon:u.value?.dishId?"mdi-food":"mdi-silverware-fork-knife",class:"mr-2"},null,8,["icon"]),s(" "+_(u.value?.dishName||"Leer")+" ",1),t(ne),t(D,{icon:"mdi-close",variant:"text",size:"small",onClick:e[16]||(e[16]=i=>R.value=!1)})]),_:1}),t(B,{class:"pa-2"},{default:l(()=>[t(De,{density:"compact"},{default:l(()=>[t(Z,{onClick:Ee,"prepend-icon":"mdi-arrow-all"},{default:l(()=>[t(P,null,{default:l(()=>[...e[53]||(e[53]=[s("Mahlzeit verschieben",-1)])]),_:1}),t(se,null,{default:l(()=>[...e[54]||(e[54]=[s("Datum oder Slot ändern",-1)])]),_:1})]),_:1}),u.value?.dishId?(o(),C(Z,{key:0,onClick:Ie,"prepend-icon":"mdi-book-open-variant",disabled:!U.value},{default:l(()=>[t(P,null,{default:l(()=>[...e[55]||(e[55]=[s("Rezept anzeigen",-1)])]),_:1}),t(se,null,{default:l(()=>[s(_(U.value?"Zutaten und Zubereitung":"Kein Rezept-Link hinterlegt"),1)]),_:1})]),_:1},8,["disabled"])):W("",!0),t(J,{class:"my-2"}),t(Z,{onClick:e[17]||(e[17]=i=>{fe(u.value),R.value=!1}),"prepend-icon":"mdi-delete",class:"text-error"},{default:l(()=>[t(P,null,{default:l(()=>[...e[56]||(e[56]=[s("Mahlzeit löschen",-1)])]),_:1}),t(se,null,{default:l(()=>[...e[57]||(e[57]=[s("Aus Einkaufsliste entfernen",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(we,{modelValue:h.value,"onUpdate:modelValue":e[22]||(e[22]=i=>h.value=i),"max-width":"400"},{default:l(()=>[t(K,null,{default:l(()=>[t(Q,null,{default:l(()=>[...e[58]||(e[58]=[s("Mahlzeit verschieben",-1)])]),_:1}),t(B,null,{default:l(()=>[t(ue,{modelValue:M.value,"onUpdate:modelValue":e[19]||(e[19]=i=>M.value=i),label:"Datum",type:"date",class:"mb-3"},null,8,["modelValue"]),t(nt,{modelValue:q.value,"onUpdate:modelValue":e[20]||(e[20]=i=>q.value=i),items:te,"item-title":"name","item-value":"id",label:"Slot"},null,8,["modelValue"])]),_:1}),t(ge,null,{default:l(()=>[t(ne),t(D,{variant:"text",onClick:e[21]||(e[21]=i=>h.value=!1)},{default:l(()=>[...e[59]||(e[59]=[s("Abbrechen",-1)])]),_:1}),t(D,{color:"primary",onClick:Qe},{default:l(()=>[...e[60]||(e[60]=[s("Verschieben",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),Ve.value>0?(o(),C(D,{key:2,color:"success",icon:"mdi-cart-plus",size:"large",position:"fixed",location:"bottom end",class:"mb-16 mr-4",elevation:"4",onClick:lt},{default:l(()=>[t(st,{content:Ve.value,color:"error",overlap:"","offset-x":"-12","offset-y":"-12"},{default:l(()=>[t(d,null,{default:l(()=>[...e[61]||(e[61]=[s("mdi-cart-plus",-1)])]),_:1})]),_:1},8,["content"])]),_:1})):W("",!0)])}}},tl=Se(Qt,[["__scopeId","data-v-a46a85b7"]]);export{tl as default};
